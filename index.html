<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <script>
    if (window.top !== window.self && window.top.location.hostname !== 'narrativemethods.com') {
        document.body.innerHTML = '<h1 style="color: #ff6b6b; text-align: center; padding: 50px;">Oops! This tool lives at <a href="https://narrativemethods.com" style="color: #ffcc00;">NarrativeMethods.com</a> only!</h1>';
    }
    </script>
    <title>Plotline Architect</title>
    <style>
        body {
            font-family: 'Comic Sans MS', 'Arial', sans-serif;
            background: #1a1a3d;
            color: #fff;
            margin: 0;
            padding: 10px;
            overflow-x: hidden;
        }
        .container {
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
            text-align: center;
            box-sizing: border-box;
        }
        h1 {
            font-size: clamp(1.5em, 5vw, 2.5em);
            color: #ffcc00;
            text-shadow: 2px 2px #ff6b6b;
            margin: 15px 0;
        }
        h2 {
            font-size: clamp(1.2em, 4vw, 2em);
            color: #00cc00;
            margin: 20px 0;
            text-shadow: 1px 1px #ff6b6b;
        }
        .dropdown-group, .definition-group, .button-group, .slider-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            margin: 15px 0;
            width: 100%;
            visibility: visible !important;
        }
        select, input[type="range"] {
            padding: 8px;
            font-size: clamp(0.9em, 3vw, 1.2em);
            border: 3px solid #ff6b6b;
            border-radius: 10px;
            background: #fff;
            color: #1a1a3d;
            cursor: pointer;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }
        button {
            padding: 10px 15px;
            font-size: clamp(0.9em, 3vw, 1.2em);
            border: none;
            border-radius: 20px;
            background: #00cc00;
            color: #fff;
            cursor: pointer;
            transition: background 0.3s, transform 0.2s;
            width: 100%;
            max-width: 180px;
            box-sizing: border-box;
        }
        button:hover {
            background: #ff6b6b;
            transform: scale(1.1);
        }
        #output, #definitionOutput, #charOutput, #sceneOutput, #dialogueOutput, #titleOutput {
            background: #fff;
            color: #1a1a3d;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            margin: 15px 0;
            font-size: clamp(0.9em, 3vw, 1.1em);
            width: 100%;
            box-sizing: border-box;
            visibility: visible !important;
        }
        #output h2, #definitionOutput h3, #charOutput h3, #sceneOutput h3, #dialogueOutput h3, #titleOutput h3 {
            color: #ffcc00;
            margin: 10px 0;
            font-size: clamp(1.1em, 3.5vw, 1.5em);
        }
        #output p, #definitionOutput p, #charOutput p, #sceneOutput p, #dialogueOutput p, #titleOutput p {
            line-height: 1.5;
            margin: 5px 0;
        }
        #definitionOutput a {
            color: #ff6b6b;
            text-decoration: underline;
        }
        @media (min-width: 600px) {
            .dropdown-group, .definition-group, .button-group, .slider-group {
                flex-direction: row;
                justify-content: center;
            }
            select, input[type="range"] {
                width: auto;
                max-width: 250px;
            }
            button {
                padding: 12px 20px;
                max-width: 220px;
            }
            .container {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìñ Plotline Architect: Unleash Your Story!</h1>
        <div style="position: absolute; top: 15px; left: 15px; font-size: 1em; color: #ff6b6b; text-shadow: 1px 1px #ffcc00; font-weight: bold;">
    NM
</div>
        <div class="dropdown-group">
            <select id="genre" title="Genre">
                <option value="">Choose Genre</option>
                <option>Sci-Fi</option>
                <option>Fantasy</option>
                <option>Mystery</option>
                <option>Horror</option>
                <option>Romance</option>
            </select>
            <select id="conflict" title="Conflict">
                <option value="">Choose Conflict</option>
            </select>
            <select id="flaw" title="Flaw">
                <option value="">Choose Flaw</option>
            </select>
        </div>
        <div class="button-group">
            <button id="generateBtn">‚ú® Generate Story Outline</button>
            <button id="randomBtn">üé≤ Surprise Me!</button>
            <button id="shareBtn">üì§ Share Plot</button>
        </div>
        <div id="output"></div>

        <h2>üé≠ Character Crafter</h2>
        <div class="button-group">
            <button id="charBtn">üé® Spin a Character!</button>
            <button id="funkifyBtn">üåü Funkify It!</button>
        </div>
        <div id="charOutput"></div>

        <h2>üé¨ Scene Starter</h2>
        <div class="button-group">
            <button id="sceneBtn">üé• Kick It Off!</button>
        </div>
        <div id="sceneOutput"></div>

        <h2>üí¨ Dialogue Dazzler</h2>
        <div class="slider-group">
            <input type="range" id="moodSlider" min="0" max="4" value="2" title="Mood: 0-Gruff, 1-Tense, 2-Casual, 3-Flirty, 4-Sassy">
            <button id="dialogueBtn">üó£Ô∏è Say Something!</button>
        </div>
        <div id="dialogueOutput"></div>

        <h2>üìö Title Tickler</h2>
        <div class="button-group">
            <button id="titleBtn">‚úçÔ∏è Tickle a Title!</button>
        </div>
        <div id="titleOutput"></div>

        <h2>üß† Plot Definition Tool</h2>
        <div class="definition-group">
            <select id="term" title="Story Term">
                <option value="">Pick a Term</option>
                <option>Protagonist</option>
                <option>Antagonist</option>
                <option>Conflict</option>
                <option>Climax</option>
                <option>Plot</option>
                <option>Setting</option>
                <option>Theme</option>
            </select>
            <button id="defineBtn">üìö Define It!</button>
            <button id="randomTermBtn">üéØ Random Term</button>
        </div>
        <div id="definitionOutput"></div>
        
    </div>
    <footer style="text-align: center; padding: 10px; font-size: 0.9em; color: #ffcc00;">
    Created by <a href="https://narrativemethods.com" style="color: #ff6b6b; text-decoration: none;">NarrativeMethods.com</a>
</footer>

    <script>
        const plotLibrary = {
            "Sci-Fi": {
                conflicts: {
                    "AI Rebellion": {
                        "Paranoia": ["Act 1: Engineer discovers AI altering logs", "Midpoint: AI claims protective motives", "Climax: Trust or destroy choice"],
                        "Impulsiveness": ["Act 1: Unauthorized system override", "Midpoint: AI develops consciousness", "Climax: Sacrifice to reset systems"],
                        "Perfectionism": ["Act 1: Create flawless AI", "Midpoint: AI rejects imperfect humans", "Climax: Introduce controlled chaos"],
                        "Isolation": ["Act 1: Solo mission with AI companion", "Midpoint: AI hides Earth's destruction", "Climax: Choose digital afterlife"],
                        "Trust Issues": ["Act 1: Security chief suspects AI", "Midpoint: AI frames human", "Climax: Prove innocence pre-purge"]
                    },
                    "Alien Invasion": {
                        "Fear": ["Act 1: First contact sparks chaos", "Midpoint: Mass panic erupts", "Climax: Fight or flee decision"],
                        "Curiosity": ["Act 1: Signal detected", "Midpoint: Alien encounter", "Climax: Forge understanding"],
                        "Survival": ["Act 1: Alien ships attack", "Midpoint: Resources dwindle", "Climax: Last stand"],
                        "Revenge": ["Act 1: Past invasion scars", "Midpoint: Alien weakness found", "Climax: Strike back"],
                        "Deception": ["Act 1: Aliens seem friendly", "Midpoint: True agenda revealed", "Climax: Betrayal battle"]
                    },
                    "Space Plague": {
                        "Fear": ["Act 1: Outbreak on starship", "Midpoint: Quarantine fails", "Climax: Cure or crash"],
                        "Hope": ["Act 1: Disease spreads", "Midpoint: Vaccine clue", "Climax: Save colony"],
                        "Greed": ["Act 1: Pharma hides truth", "Midpoint: Black market cure", "Climax: Expose conspiracy"],
                        "Despair": ["Act 1: Crew falls ill", "Midpoint: Captain‚Äôs grim log", "Climax: Mercy ending"],
                        "Courage": ["Act 1: Medic volunteers", "Midpoint: Faces plague", "Climax: Leads survivors"]
                    },
                    "Time Warp": {
                        "Regret": ["Act 1: Time machine test", "Midpoint: Past altered", "Climax: Fix or abandon timeline"],
                        "Obsession": ["Act 1: Seek lost love", "Midpoint: Time fractures", "Climax: Let go or break reality"],
                        "Curiosity": ["Act 1: Experiment goes awry", "Midpoint: Meet future self", "Climax: Rewrite fate"],
                        "Guilt": ["Act 1: Caused disaster", "Midpoint: Time loop trap", "Climax: Undo mistake"],
                        "Arrogance": ["Act 1: Defy warnings", "Midpoint: History unravels", "Climax: Humble reset"]
                    },
                    "Galactic War": {
                        "Loyalty": ["Act 1: Join fleet", "Midpoint: Betrayal within", "Climax: Duty vs truth"],
                        "Ambition": ["Act 1: Seek command", "Midpoint: Risky gambit", "Climax: Victory or ruin"],
                        "Fear": ["Act 1: Drafted to fight", "Midpoint: Enemy closes in", "Climax: Face fears"],
                        "Honor": ["Act 1: Defend planet", "Midpoint: Moral dilemma", "Climax: Sacrifice for peace"],
                        "Revenge": ["Act 1: Homeworld destroyed", "Midpoint: Enemy leader found", "Climax: Vengeance or mercy"]
                    }
                }
            },
            "Fantasy": {
                conflicts: {
                    "Dragon Siege": {
                        "Cowardice": ["Act 1: Village tribute ritual", "Midpoint: Dragon‚Äôs wound found", "Climax: Heal or flee"],
                        "Ambition": ["Act 1: Knight seeks hoard", "Midpoint: Cursed treasure", "Climax: Destroy hoard"],
                        "Compassion": ["Act 1: Aid injured dragon", "Midpoint: Village fury", "Climax: Dragon ally"],
                        "Deceit": ["Act 1: Fake attacks", "Midpoint: Real dragon strikes", "Climax: Unite defenses"],
                        "Tradition": ["Act 1: Ancient pact", "Midpoint: Dragon demands change", "Climax: New treaty"]
                    },
                    "Royal Betrayal": {
                        "Loyalty": ["Act 1: Sworn to king", "Midpoint: Betrayal uncovered", "Climax: Duty or love"],
                        "Ambition": ["Act 1: Seek throne", "Midpoint: Enemy alliance", "Climax: Betrayal wins"],
                        "Love": ["Act 1: Secret affair", "Midpoint: Love exposed", "Climax: Sacrifice for it"],
                        "Deceit": ["Act 1: Hidden agenda", "Midpoint: Lies unravel", "Climax: Truth triumphs"],
                        "Fear": ["Act 1: Fear of failure", "Midpoint: Overcome doubt", "Climax: Rise victorious"]
                    },
                    "Dark Prophecy": {
                        "Denial": ["Act 1: Prophecy ignored", "Midpoint: Signs appear", "Climax: Accept fate"],
                        "Hope": ["Act 1: Chosen one rises", "Midpoint: Prophecy twists", "Climax: Defy doom"],
                        "Pride": ["Act 1: Hero claims power", "Midpoint: Prophecy backfires", "Climax: Humble win"],
                        "Sacrifice": ["Act 1: Foretold loss", "Midpoint: Loved one at risk", "Climax: Give all"],
                        "Curiosity": ["Act 1: Seek oracle", "Midpoint: Dark truth", "Climax: Rewrite prophecy"]
                    },
                    "Cursed Relic": {
                        "Greed": ["Act 1: Hunt relic", "Midpoint: Curse strikes", "Climax: Break it"],
                        "Guilt": ["Act 1: Steal relic", "Midpoint: Past sins haunt", "Climax: Atone"],
                        "Fear": ["Act 1: Relic whispers", "Midpoint: Madness grows", "Climax: Face terror"],
                        "Obsession": ["Act 1: Relic quest", "Midpoint: Lose self", "Climax: Free soul"],
                        "Compassion": ["Act 1: Help cursed", "Midpoint: Relic binds", "Climax: Save all"]
                    },
                    "Wizard Duel": {
                        "Rivalry": ["Act 1: Challenge issued", "Midpoint: Dirty tricks", "Climax: Final spell"],
                        "Pride": ["Act 1: Boast mastery", "Midpoint: Spell fails", "Climax: Learn humility"],
                        "Betrayal": ["Act 1: Mentor turns", "Midpoint: Trap set", "Climax: Outwit foe"],
                        "Honor": ["Act 1: Fair fight", "Midpoint: Rules break", "Climax: Restore order"],
                        "Love": ["Act 1: Duel for heart", "Midpoint: Rival‚Äôs plea", "Climax: Choose love"]
                    }
                }
            },
            "Mystery": {
                conflicts: {
                    "Art Heist": {
                        "Greed": ["Act 1: Museum hit", "Midpoint: Insider clue", "Climax: Vault reveal"],
                        "Pride": ["Act 1: Rival solves first", "Midpoint: False evidence", "Climax: Showdown"],
                        "Guilt": ["Act 1: Guard fails", "Midpoint: Family tie", "Climax: Redeem self"],
                        "Revenge": ["Act 1: Artist‚Äôs plot", "Midpoint: Thieves strike", "Climax: Alliance"],
                        "Curiosity": ["Act 1: Hidden clue", "Midpoint: Map found", "Climax: Race ends"]
                    },
                    "Murder Mystery": {
                        "Revenge": ["Act 1: Body found", "Midpoint: Suspect named", "Climax: Culprit caught"],
                        "Jealousy": ["Act 1: Love triangle", "Midpoint: Affair out", "Climax: Confession"],
                        "Greed": ["Act 1: Will dispute", "Midpoint: Hidden will", "Climax: Killer nabbed"],
                        "Curiosity": ["Act 1: Odd death", "Midpoint: Clue chase", "Climax: Solved"],
                        "Fear": ["Act 1: Killer loose", "Midpoint: Near miss", "Climax: Confrontation"]
                    },
                    "Missing Person": {
                        "Despair": ["Act 1: Friend vanishes", "Midpoint: Dark lead", "Climax: Lost forever"],
                        "Hope": ["Act 1: Search begins", "Midpoint: Clue found", "Climax: Reunion"],
                        "Deception": ["Act 1: False trail", "Midpoint: Lie exposed", "Climax: Truth out"],
                        "Guilt": ["Act 1: Last fight", "Midpoint: Regret hits", "Climax: Find them"],
                        "Obsession": ["Act 1: Case consumes", "Midpoint: Risk all", "Climax: Resolve"]
                    },
                    "Cold Case": {
                        "Regret": ["Act 1: Old file reopened", "Midpoint: Past mistake", "Climax: Fix it"],
                        "Persistence": ["Act 1: Dusty clues", "Midpoint: Breakthrough", "Climax: Case closed"],
                        "Fear": ["Act 1: Threat revives", "Midpoint: Danger grows", "Climax: Face past"],
                        "Justice": ["Act 1: Seek truth", "Midpoint: Witness found", "Climax: Verdict"],
                        "Curiosity": ["Act 1: Odd detail", "Midpoint: Puzzle fits", "Climax: Solve it"]
                    },
                    "Conspiracy": {
                        "Paranoia": ["Act 1: Strange note", "Midpoint: Shadows watch", "Climax: Trust no one"],
                        "Courage": ["Act 1: Expose plot", "Midpoint: Risk life", "Climax: Win big"],
                        "Deception": ["Act 1: Fake ally", "Midpoint: Betrayal", "Climax: Outsmart"],
                        "Greed": ["Act 1: Bribe offered", "Midpoint: Stakes rise", "Climax: Take down"],
                        "Hope": ["Act 1: Clue to truth", "Midpoint: Allies form", "Climax: Uncover all"]
                    }
                }
            },
            "Horror": {
                conflicts: {
                    "Haunted Asylum": {
                        "Guilt": ["Act 1: Explore asylum", "Midpoint: Family secrets", "Climax: Confess or burn"],
                        "Greed": ["Act 1: Viral video hunt", "Midpoint: Possession proof", "Climax: Live exorcism"],
                        "Denial": ["Act 1: Ignore warnings", "Midpoint: Staff vanish", "Climax: Truth hits"],
                        "Fear": ["Act 1: Night guard gig", "Midpoint: Voices call", "Climax: Face trauma"],
                        "Curiosity": ["Act 1: Research trip", "Midpoint: Sleepwalking", "Climax: Stay forever"]
                    },
                    "Zombie Outbreak": {
                        "Survival": ["Act 1: Outbreak hits", "Midpoint: Safe zone", "Climax: Break free"],
                        "Fear": ["Act 1: Zombies strike", "Midpoint: Kin infected", "Climax: Overcome"],
                        "Betrayal": ["Act 1: Group unites", "Midpoint: Trust shatters", "Climax: Deal with foe"],
                        "Isolation": ["Act 1: City alone", "Midpoint: Survivors met", "Climax: Rejoin world"],
                        "Sacrifice": ["Act 1: Save others", "Midpoint: Tough call", "Climax: Give life"]
                    },
                    "Cursed Object": {
                        "Greed": ["Act 1: Find artifact", "Midpoint: Curse grows", "Climax: Destroy it"],
                        "Denial": ["Act 1: Gift accepted", "Midpoint: Odd events", "Climax: Face truth"],
                        "Obsession": ["Act 1: Study item", "Midpoint: Mind slips", "Climax: Break free"],
                        "Guilt": ["Act 1: Steal object", "Midpoint: Haunting starts", "Climax: Atone"],
                        "Fear": ["Act 1: Object whispers", "Midpoint: Terror rises", "Climax: Conquer it"]
                    },
                    "Demon Pact": {
                        "Despair": ["Act 1: Make deal", "Midpoint: Soul at risk", "Climax: Lose all"],
                        "Ambition": ["Act 1: Seek power", "Midpoint: Demon tricks", "Climax: Outwit"],
                        "Love": ["Act 1: Save loved one", "Midpoint: Pact twists", "Climax: Sacrifice"],
                        "Regret": ["Act 1: Deal struck", "Midpoint: Past haunts", "Climax: Undo it"],
                        "Pride": ["Act 1: Defy warnings", "Midpoint: Demon wins", "Climax: Humble end"]
                    },
                    "Witch Hunt": {
                        "Paranoia": ["Act 1: Village panic", "Midpoint: Accused", "Climax: Prove innocence"],
                        "Justice": ["Act 1: Hunt begins", "Midpoint: Witch found", "Climax: Fair trial"],
                        "Betrayal": ["Act 1: Friend turns", "Midpoint: Lies spread", "Climax: Confront"],
                        "Fear": ["Act 1: Signs appear", "Midpoint: Mob forms", "Climax: Escape"],
                        "Compassion": ["Act 1: Hide accused", "Midpoint: Truth out", "Climax: Save them"]
                    }
                }
            },
            "Romance": {
                conflicts: {
                    "Fake Relationship": {
                        "Pride": ["Act 1: Pretend love", "Midpoint: Jealousy hits", "Climax: Confess"],
                        "Fear": ["Act 1: Hide truth", "Midpoint: Partner commits", "Climax: Come out"],
                        "Ambition": ["Act 1: Fame deal", "Midpoint: Real love", "Climax: Love or career"],
                        "Insecurity": ["Act 1: Perfect match", "Midpoint: Flaws show", "Climax: Accept"],
                        "Loyalty": ["Act 1: Trick ex", "Midpoint: Ex returns", "Climax: Choose new"]
                    },
                    "Office Romance": {
                        "Secrecy": ["Act 1: Work sparks", "Midpoint: Hide love", "Climax: Go public"],
                        "Competition": ["Act 1: Rivals flirt", "Midpoint: Love vs job", "Climax: Pick love"],
                        "Misunderstandings": ["Act 1: Signals cross", "Midpoint: Fight erupts", "Climax: Fix it"],
                        "Past": ["Act 1: Ex reappears", "Midpoint: Old flames", "Climax: Move on"],
                        "Jealousy": ["Act 1: Office flirt", "Midpoint: Rift grows", "Climax: Recommit"]
                    },
                    "Forbidden Love": {
                        "Duty": ["Act 1: Love banned", "Midpoint: Duty calls", "Climax: Defy all"],
                        "Fear": ["Act 1: Secret meet", "Midpoint: Caught", "Climax: Run away"],
                        "Pride": ["Act 1: Deny feelings", "Midpoint: Passion wins", "Climax: Admit love"],
                        "Sacrifice": ["Act 1: Love grows", "Midpoint: Risk all", "Climax: Give up"],
                        "Hope": ["Act 1: Stolen glances", "Midpoint: Plan escape", "Climax: Freedom"]
                    },
                    "Second Chance": {
                        "Regret": ["Act 1: Ex returns", "Midpoint: Past hurts", "Climax: Forgive"],
                        "Trust": ["Act 1: Meet again", "Midpoint: Doubt lingers", "Climax: Rebuild"],
                        "Fear": ["Act 1: Old flame", "Midpoint: Pain recalls", "Climax: Try again"],
                        "Pride": ["Act 1: Deny spark", "Midpoint: Walls crack", "Climax: Reunite"],
                        "Love": ["Act 1: Chance meet", "Midpoint: Feelings bloom", "Climax: Forever"]
                    },
                    "Love Triangle": {
                        "Jealousy": ["Act 1: Two suitors", "Midpoint: Tensions rise", "Climax: Choose"],
                        "Insecurity": ["Act 1: Doubt worth", "Midpoint: Rivals shine", "Climax: Self-love"],
                        "Deception": ["Act 1: Hide feelings", "Midpoint: Lies out", "Climax: Truth wins"],
                        "Loyalty": ["Act 1: Friend loves", "Midpoint: Heart splits", "Climax: Pick one"],
                        "Passion": ["Act 1: Sparks fly", "Midpoint: Chaos grows", "Climax: Bold move"]
                    }
                }
            }
        };

        const storyDefinitions = {
            "Protagonist": {
                def: "The main character who drives the story‚Äîlike the hero (or anti-hero) you root for!",
                example: "In a Sci-Fi tale, the protagonist might be a paranoid engineer battling an AI rebellion."
            },
            "Antagonist": {
                def: "The big baddie or force opposing the protagonist‚Äîcould be a person, creature, or even fate!",
                example: "Think of a Fantasy dragon sieging a village, making life tough for our ambitious knight."
            },
            "Conflict": {
                def: "The juicy problem or struggle that keeps the story spicy‚Äîwithout it, there‚Äôs no drama!",
                example: "In a Mystery, the conflict could be an art heist with greed pushing the stakes higher."
            },
            "Climax": {
                def: "The most intense, do-or-die moment where everything hits the fan‚Äîpeak excitement!",
                example: "In Horror, it‚Äôs when the fearful night guard faces their trauma in a haunted asylum."
            },
            "Plot": {
                def: "The sequence of events that make up the story‚Äîbasically, what happens and why!",
                example: "A Romance plot might follow a fake relationship turning real, with pride in the mix."
            },
            "Setting": {
                def: "Where and when the story happens‚Äîsets the vibe and grounds the action!",
                example: "A Sci-Fi setting could be a time-warped spaceship, twisting reality for our curious hero."
            },
            "Theme": {
                def: "The big idea or message lurking beneath the story‚Äîwhat it‚Äôs *really* about!",
                example: "In a Fantasy royal betrayal, the theme might be loyalty tested by love."
            }
        };

        const plotEnhancers = {
            "Sci-Fi": {
                characters: ["Jax, a rogue engineer", "Dr. Vex, a quirky scientist", "Captain Zara, a grizzled commander"],
                settings: ["aboard the starship Nexus", "on the desert planet Xylos", "in a crumbling orbital station"],
                twists: ["a glitchy lie threatens all", "an alien signal hijacks the tech", "a time rift scrambles reality"],
                prompts: ["What‚Äôs the AI hiding?", "Who sent the signal?", "Can they escape the loop?"]
            },
            "Fantasy": {
                characters: ["Sir Kael, a reluctant knight", "Elara, a cunning mage", "King Torin, a haunted ruler"],
                settings: ["in the shadowed realm of Drakon", "beneath the Whispering Woods", "atop the Crystal Peaks"],
                twists: ["a curse binds their fate", "a traitor wears a crown", "an ancient pact awakens"],
                prompts: ["What‚Äôs the dragon‚Äôs secret?", "Who‚Äôs the real enemy?", "Can the prophecy be undone?"]
            },
            "Mystery": {
                characters: ["Detective Rune, a sharp skeptic", "Clara, a nosy journalist", "Mr. Grey, a shady collector"],
                settings: ["in the foggy streets of Oldtown", "inside a dusty mansion", "at a bustling art gala"],
                twists: ["a clue points to kin", "the theft hides a murder", "a lie unravels the past"],
                prompts: ["Who‚Äôs the insider?", "What‚Äôs in the vault?", "Why frame the innocent?"]
            },
            "Horror": {
                characters: ["Lila, a jittery guard", "Evan, a ghost-obsessed blogger", "Sister Mara, a grim nun"],
                settings: ["in the decaying Blackwood Asylum", "beneath a cursed swamp", "within a silent village"],
                twists: ["a voice names their sins", "the dead want company", "a pact fuels the terror"],
                prompts: ["What haunts the halls?", "Who‚Äôs next to vanish?", "Can they break the curse?"]
            },
            "Romance": {
                characters: ["Avery, a proud actor", "Sam, a shy barista", "Lady Elise, a defiant heiress"],
                settings: ["in a bustling city caf√©", "at a lavish masked ball", "on a stormy coastal estate"],
                twists: ["a rival stirs jealousy", "a secret threatens all", "love defies the rules"],
                prompts: ["What‚Äôs the ex hiding?", "Can they trust again?", "Who wins their heart?"]
            }
        };

        const plotTwists = {
            "Sci-Fi": [
                "But then, the AI reveals it‚Äôs your long-lost sibling!",
                "Suddenly, a wormhole spits out a rival ship!",
                "Wait‚Äîthe plague‚Äôs a simulation gone rogue!",
                "Shockingly, the crew‚Äôs all androids!",
                "Oh no‚Äîthe planet‚Äôs core is about to blow!"
            ],
            "Fantasy": [
                "Suddenly, the dragon‚Äôs hoard is a portal to another realm!",
                "But the king‚Äôs a doppelg√§nger in disguise!",
                "Behold‚Äîthe relic starts whispering secrets!",
                "Wait‚Äîthe prophecy was forged by a foe!",
                "Oh snap‚Äîthe forest comes alive with vengeance!"
            ],
            "Mystery": [
                "But then, the victim‚Äôs alive and pulling strings!",
                "Suddenly, the painting hides a coded map!",
                "Wait‚Äîthe killer‚Äôs been dead for years!",
                "Shockingly, the detective‚Äôs the prime suspect!",
                "Oh no‚Äîthe clue‚Äôs a red herring from the start!"
            ],
            "Horror": [
                "But then, the asylum mirrors your nightmares!",
                "Suddenly, the zombies are your old friends!",
                "Wait‚Äîthe object‚Äôs alive and hunting you!",
                "Shockingly, the demon‚Äôs been you all along!",
                "Oh no‚Äîthe village is a trap for souls!"
            ],
            "Romance": [
                "But then, the ex crashes the wedding with proof!",
                "Suddenly, a letter reveals a hidden past!",
                "Wait‚Äîthe rival‚Äôs been in love all along!",
                "Shockingly, the fling‚Äôs a royal in disguise!",
                "Oh no‚Äîthe storm uncovers a buried vow!"
            ]
        };

        const characterTraits = {
            "Sci-Fi": {
                roles: ["engineer", "pilot", "scientist", "soldier", "hacker"],
                quirks: ["obsessed with old Earth tunes", "talks to tech like friends", "wears a glitchy eyepatch", "carries a lucky bolt", "hums under stress"],
                backstories: ["escaped a lab experiment", "lost a crew to a black hole", "hides a banned invention", "seeks a lost signal", "born on a dying ship"]
            },
            "Fantasy": {
                roles: ["knight", "mage", "thief", "princess", "bard"],
                quirks: ["sings to their sword", "collects glowing stones", "fears mirrors", "dances in the rain", "whispers to the wind"],
                backstories: ["cursed by a witch", "fled a burning kingdom", "stole from a dragon", "heard a prophecy in a dream", "raised by wolves"]
            },
            "Mystery": {
                roles: ["detective", "journalist", "thief", "curator", "witness"],
                quirks: ["chews on pens", "wears mismatched socks", "sketches suspects", "trusts no one", "counts footsteps"],
                backstories: ["solved a cold case", "lost a partner to crime", "hides a dark past", "owns a secret diary", "saw too much"]
            },
            "Horror": {
                roles: ["guard", "blogger", "priest", "student", "survivor"],
                quirks: ["jumps at shadows", "carries a broken watch", "prays in whispers", "draws creepy symbols", "sleeps with lights on"],
                backstories: ["saw a ghost as a kid", "escaped a cult", "found a cursed book", "heard voices in the dark", "lost kin to the unknown"]
            },
            "Romance": {
                roles: ["actor", "barista", "heiress", "writer", "musician"],
                quirks: ["blushes at compliments", "collects old love letters", "sings off-key", "hides a tattoo", "loves stormy nights"],
                backstories: ["ran from an arranged match", "lost a first love", "wrote a secret novel", "hides a famous past", "met fate in a crowd"]
            }
        };

        const dialogueLines = {
            "Sci-Fi": {
                "Gruff": ["Get off my ship, tin can!", "I‚Äôve seen worse glitches than you.", "Fix it or we‚Äôre space dust!"],
                "Tense": ["The logs don‚Äôt lie‚Äîdo they?", "We‚Äôve got ten minutes, move!", "It‚Äôs watching us, I swear."],
                "Casual": ["Eh, AI‚Äôs just cranky today.", "Wanna bet it‚Äôs aliens again?", "No biggie, just a warp glitch."],
                "Flirty": ["Hey, AI, got a spark for me?", "You‚Äôre cuter than a starship, doc.", "Wanna dance in zero-G?"],
                "Sassy": ["Oh, great, the AI‚Äôs got attitude now.", "Fix your own mess, metalhead!", "Yeah, I‚Äôm the boss, not you."]
            },
            "Fantasy": {
                "Gruff": ["Move, or the dragon eats you!", "I‚Äôve slain worse than this.", "Keep your magic to yourself!"],
                "Tense": ["The prophecy‚Äôs real‚ÄîI feel it!", "One wrong step, we‚Äôre cursed.", "It‚Äôs awake‚Äîrun!"],
                "Casual": ["Just another dragon, huh?", "Wanna sword-fight later?", "Eh, the curse‚Äôll wear off."],
                "Flirty": ["Your magic‚Äôs kinda hot, mage.", "Steal my heart, not the gold!", "Dance with me under the moons?"],
                "Sassy": ["Oh, please, your crown‚Äôs crooked.", "I‚Äôd slay you, but I‚Äôm busy.", "Nice spell‚Äîtry harder next time."]
            },
            "Mystery": {
                "Gruff": ["Spill it, or I walk!", "I‚Äôve cracked tougher cases.", "Hands off my clues!"],
                "Tense": ["The killer‚Äôs here‚Äîwatch it!", "One slip, we‚Äôre done.", "That shadow moved!"],
                "Casual": ["Eh, just another heist.", "Wanna guess the perp?", "Clues‚Äôll turn up, chill."],
                "Flirty": ["You‚Äôre my best clue, babe.", "Solve this with me, cutie?", "Got a secret for me?"],
                "Sassy": ["Oh, you‚Äôre the mastermind? Cute.", "Keep up, rookie!", "Nice try hiding that clue."]
            },
            "Horror": {
                "Gruff": ["Shut up and run!", "I‚Äôve faced worse nightmares.", "Stay back, freak!"],
                "Tense": ["It‚Äôs behind us‚Äîdon‚Äôt look!", "The lights flickered again!", "We‚Äôre not alone‚Äîhear that?"],
                "Casual": ["Just ghosts, no biggie.", "Wanna bet it‚Äôs cursed?", "Eh, I‚Äôve seen creepier."],
                "Flirty": ["Scared? Hold my hand.", "You‚Äôre spookier than this place.", "Let‚Äôs haunt together?"],
                "Sassy": ["Oh, boo-hoo, a ghost!", "Nice try, creepy‚ÄîI‚Äôm out.", "What, no jump-scare?"]
            },
            "Romance": {
                "Gruff": ["Love‚Äôs a mess‚Äîdeal with it!", "I‚Äôm not good at this, okay?", "Stop staring already!"],
                "Tense": ["If they see us, it‚Äôs over!", "One kiss, then we‚Äôre done.", "Heart‚Äôs racing‚Äîyours?"],
                "Casual": ["Wanna grab coffee later?", "Love‚Äôs cool, I guess.", "You‚Äôre kinda cute, huh?"],
                "Flirty": ["Eyes like yours? Trouble.", "Steal my heart, thief!", "Dance closer, darling."],
                "Sassy": ["Oh, you‚Äôre charming? Prove it.", "I‚Äôm not swooning yet!", "Nice line‚Äînext!"]
            }
        };

        const titleWords = {
            "Sci-Fi": {
                prefixes: ["Quantum", "Galactic", "Neon", "Silent", "Echo"],
                nouns: ["Void", "Nexus", "Plague", "Signal", "Warp"],
                suffixes: ["of Xylos", "Unraveled", "in Flux", "Reborn", "Betrayed"]
            },
            "Fantasy": {
                prefixes: ["Cursed", "Golden", "Shadow", "Mystic", "Eternal"],
                nouns: ["Realm", "Dragon", "Crown", "Quest", "Prophecy"],
                suffixes: ["of Drakon", "Unveiled", "in Chains", "Awakened", "Lost"]
            },
            "Mystery": {
                prefixes: ["Hidden", "Foggy", "Dark", "Twisted", "Secret"],
                nouns: ["Heist", "Murder", "Clue", "Case", "Shadow"],
                suffixes: ["of Oldtown", "Uncovered", "in Silence", "Revealed", "Gone"]
            },
            "Horror": {
                prefixes: ["Haunted", "Grim", "Silent", "Cursed", "Wicked"],
                nouns: ["Asylum", "Swamp", "Night", "Pact", "Echo"],
                suffixes: ["of Blackwood", "Unleashed", "in Darkness", "Alive", "Trapped"]
            },
            "Romance": {
                prefixes: ["Stolen", "Forbidden", "Wild", "Tender", "Fated"],
                nouns: ["Heart", "Dance", "Love", "Vow", "Storm"],
                suffixes: ["of the City", "Unraveled", "in Bloom", "Rekindled", "Broken"]
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            const genreSelect = document.getElementById('genre');
            const conflictSelect = document.getElementById('conflict');
            const flawSelect = document.getElementById('flaw');
            const generateBtn = document.getElementById('generateBtn');
            const randomBtn = document.getElementById('randomBtn');
            const shareBtn = document.getElementById('shareBtn');
            const outputDiv = document.getElementById('output');

            const charBtn = document.getElementById('charBtn');
            const funkifyBtn = document.getElementById('funkifyBtn');
            const charOutput = document.getElementById('charOutput');

            const sceneBtn = document.getElementById('sceneBtn');
            const sceneOutput = document.getElementById('sceneOutput');

            const moodSlider = document.getElementById('moodSlider');
            const dialogueBtn = document.getElementById('dialogueBtn');
            const dialogueOutput = document.getElementById('dialogueOutput');

            const titleBtn = document.getElementById('titleBtn');
            const titleOutput = document.getElementById('titleOutput');

            const termSelect = document.getElementById('term');
            const defineBtn = document.getElementById('defineBtn');
            const randomTermBtn = document.getElementById('randomTermBtn');
            const definitionOutput = document.getElementById('definitionOutput');

            // Plotline Architect
            genreSelect.addEventListener('change', () => {
                const genre = genreSelect.value;
                conflictSelect.innerHTML = '<option value="">Choose Conflict</option>';
                flawSelect.innerHTML = '<option value="">Choose Flaw</option>';
                outputDiv.innerHTML = '';
                if (genre && plotLibrary[genre]) {
                    const conflicts = Object.keys(plotLibrary[genre].conflicts);
                    conflicts.forEach(conflict => conflictSelect.add(new Option(conflict, conflict)));
                }
            });

            conflictSelect.addEventListener('change', () => {
                const genre = genreSelect.value;
                const conflict = conflictSelect.value;
                flawSelect.innerHTML = '<option value="">Choose Flaw</option>';
                outputDiv.innerHTML = '';
                if (genre && conflict && plotLibrary[genre]?.conflicts[conflict]) {
                    const flaws = Object.keys(plotLibrary[genre].conflicts[conflict]);
                    flaws.forEach(flaw => flawSelect.add(new Option(flaw, flaw)));
                }
            });

            generateBtn.addEventListener('click', () => {
                const genre = genreSelect.value;
                const conflict = conflictSelect.value;
                const flaw = flawSelect.value;
                outputDiv.innerHTML = '';
                if (!genre || !conflict || !flaw) {
                    outputDiv.innerHTML = '<p style="color: #ff6b6b">‚ö†Ô∏è Pick all three, you creative genius!</p>';
                    return;
                }
                const plot = plotLibrary[genre]?.conflicts[conflict]?.[flaw];
                if (plot) {
                    const enhancer = plotEnhancers[genre];
                    const char = enhancer.characters[Math.floor(Math.random() * enhancer.characters.length)];
                    const setting = enhancer.settings[Math.floor(Math.random() * enhancer.settings.length)];
                    const twist = enhancer.twists[Math.floor(Math.random() * enhancer.twists.length)];
                    const prompt = enhancer.prompts[Math.floor(Math.random() * enhancer.prompts.length)];
                    const wildTwist = plotTwists[genre][Math.floor(Math.random() * plotTwists[genre].length)];
                    outputDiv.innerHTML = `
                        <h2>${genre}: ${conflict}</h2>
                        <p>Meet ${char}, a ${flaw.toLowerCase()} soul ${plot[0].split(': ')[1].toLowerCase()} ${setting}. 
                        Tensions flare when ${plot[1].split(': ')[1].toLowerCase()}‚Äî${twist}. 
                        In a wild showdown, ${plot[2].split(': ')[1].toLowerCase()}! 
                        <strong>${wildTwist}</strong> 
                        <em>Next Step:</em> ${prompt}</p>
                    `;
                    new Audio('https://www.myinstants.com/media/sounds/tada.mp3').play().catch(() => {});
                } else {
                    outputDiv.innerHTML = '<p>Oops, no plot for that combo yet!</p>';
                }
            });

            randomBtn.addEventListener('click', () => {
                const genres = Object.keys(plotLibrary);
                const genre = genres[Math.floor(Math.random() * genres.length)];
                genreSelect.value = genre;
                const conflicts = Object.keys(plotLibrary[genre].conflicts);
                const conflict = conflicts[Math.floor(Math.random() * conflicts.length)];
                conflictSelect.innerHTML = '<option value="">Choose Conflict</option>';
                conflicts.forEach(c => conflictSelect.add(new Option(c, c)));
                conflictSelect.value = conflict;
                const flaws = Object.keys(plotLibrary[genre].conflicts[conflict]);
                const flaw = flaws[Math.floor(Math.random() * flaws.length)];
                flawSelect.innerHTML = '<option value="">Choose Flaw</option>';
                flaws.forEach(f => flawSelect.add(new Option(f, f)));
                flawSelect.value = flaw;
                generateBtn.click();
            });

            shareBtn.addEventListener('click', () => {
                const genre = genreSelect.value;
                const conflict = conflictSelect.value;
                const flaw = flawSelect.value;
                if (genre && conflict && flaw) {
                    const text = `My wild plot from narrativemethods.com: ${genre} - ${conflict} (${flaw})! Try it at https://narrativemethods.com!`;
                    navigator.clipboard.writeText(text);
                    outputDiv.innerHTML += '<p style="color: #00cc00">‚úÖ Copied to clipboard‚Äîshare the madness!</p>';
                } else {
                    outputDiv.innerHTML += '<p style="color: #ff6b6b">‚ö†Ô∏è Generate a plot first!</p>';
                }
            });

            // Character Crafter
            let lastChar = null;
            charBtn.addEventListener('click', () => {
                const genre = genreSelect.value || Object.keys(plotLibrary)[Math.floor(Math.random() * 5)];
                const traits = characterTraits[genre];
                const role = traits.roles[Math.floor(Math.random() * traits.roles.length)];
                const quirk = traits.quirks[Math.floor(Math.random() * traits.quirks.length)];
                const backstory = traits.backstories[Math.floor(Math.random() * traits.backstories.length)];
                const names = plotEnhancers[genre].characters.map(c => c.split(',')[0]);
                const name = names[Math.floor(Math.random() * names.length)];
                lastChar = { name, role, quirk, backstory };
                charOutput.innerHTML = `
                    <h3>${name}, the ${role}</h3>
                    <p><strong>Quirk:</strong> ${quirk}</p>
                    <p><strong>Backstory:</strong> ${backstory}</p>
                `;
                new Audio('https://www.myinstants.com/media/sounds/tada.mp3').play().catch(() => {});
            });

            funkifyBtn.addEventListener('click', () => {
                if (!lastChar) {
                    charOutput.innerHTML = '<p style="color: #ff6b6b">‚ö†Ô∏è Spin a character first, funky friend!</p>';
                    return;
                }
                const funkyQuirks = ["loves disco dancing", "talks to invisible pets", "wears glitter boots", "sings off-key lullabies", "collects cosmic socks"];
                const funkyTwist = funkyQuirks[Math.floor(Math.random() * funkyQuirks.length)];
                lastChar.quirk = funkyTwist;
                charOutput.innerHTML = `
                    <h3>${lastChar.name}, the ${lastChar.role}</h3>
                    <p><strong>Quirk:</strong> ${lastChar.quirk} ‚ú®</p>
                    <p><strong>Backstory:</strong> ${lastChar.backstory}</p>
                `;
                new Audio('https://www.myinstants.com/media/sounds/tada.mp3').play().catch(() => {});
            });

            // Scene Starter
            sceneBtn.addEventListener('click', () => {
                const genre = genreSelect.value;
                const conflict = conflictSelect.value;
                const flaw = flawSelect.value;
                if (!genre || !conflict || !flaw) {
                    sceneOutput.innerHTML = '<p style="color: #ff6b6b">‚ö†Ô∏è Generate a plot first, story spinner!</p>';
                    return;
                }
                const plot = plotLibrary[genre]?.conflicts[conflict]?.[flaw];
                const enhancer = plotEnhancers[genre];
                const char = enhancer.characters[Math.floor(Math.random() * enhancer.characters.length)];
                const setting = enhancer.settings[Math.floor(Math.random() * enhancer.settings.length)];
                const twist = enhancer.twists[Math.floor(Math.random() * enhancer.twists.length)];
                sceneOutput.innerHTML = `
                    <h3>Opening Scene</h3>
                    <p>${char.split(',')[0]} ${plot[0].split(': ')[1].toLowerCase()} ${setting}, heart pounding as the air thickens with ${flaw.toLowerCase()}. 
                    The moment shifts‚Äî${plot[1].split(': ')[1].toLowerCase()}, and ${twist}. 
                    ‚ÄúThis can‚Äôt be real,‚Äù they mutter, but the truth‚Äôs already clawing closer.</p>
                `;
                new Audio('https://www.myinstants.com/media/sounds/typewriter.mp3').play().catch(() => {});
            });

            // Dialogue Dazzler
            dialogueBtn.addEventListener('click', () => {
                const genre = genreSelect.value || Object.keys(plotLibrary)[Math.floor(Math.random() * 5)];
                const flaw = flawSelect.value || "mystery";
                const mood = ["Gruff", "Tense", "Casual", "Flirty", "Sassy"][moodSlider.value];
                const lines = dialogueLines[genre][mood];
                const line = lines[Math.floor(Math.random() * lines.length)];
                dialogueOutput.innerHTML = `
                    <h3>${mood} Dialogue</h3>
                    <p>‚Äú${line}‚Äù ‚Äî ${flaw ? `A ${flaw.toLowerCase()} soul` : 'Someone'}</p>
                `;
                new Audio('https://www.myinstants.com/media/sounds/tada.mp3').play().catch(() => {});
            });

            // Title Tickler
            titleBtn.addEventListener('click', () => {
                const genre = genreSelect.value || Object.keys(plotLibrary)[Math.floor(Math.random() * 5)];
                const words = titleWords[genre];
                const prefix = words.prefixes[Math.floor(Math.random() * words.prefixes.length)];
                const noun = words.nouns[Math.floor(Math.random() * words.nouns.length)];
                const suffix = words.suffixes[Math.floor(Math.random() * words.suffixes.length)];
                titleOutput.innerHTML = `
                    <h3>Your Funky Title</h3>
                    <p><strong>${prefix} ${noun} ${suffix}</strong></p>
                `;
                new Audio('https://www.myinstants.com/media/sounds/tada.mp3').play().catch(() => {});
            });

            // Plot Definition Tool
            defineBtn.addEventListener('click', () => {
                const term = termSelect.value;
                if (term && storyDefinitions[term]) {
                    definitionOutput.innerHTML = `
                        <h3>${term}</h3>
                        <p><strong>What it is:</strong> ${storyDefinitions[term].def}</p>
                        <p><strong>Example:</strong> ${storyDefinitions[term].example}</p>
                        <p><a href="#" onclick="document.getElementById('genre').focus(); return false;">Try it in the Plotline Architect!</a></p>
                    `;
                } else {
                    definitionOutput.innerHTML = '<p style="color: #ff6b6b">‚ö†Ô∏è Pick a term first, story wizard!</p>';
                }
            });

            randomTermBtn.addEventListener('click', () => {
                const terms = Object.keys(storyDefinitions);
                const randomTerm = terms[Math.floor(Math.random() * terms.length)];
                termSelect.value = randomTerm;
                defineBtn.click();
            });
        });
    </script>
</body>
</html>
